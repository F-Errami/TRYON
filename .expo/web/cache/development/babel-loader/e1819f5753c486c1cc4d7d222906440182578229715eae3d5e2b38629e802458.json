{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport { Camera } from 'expo-camera';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar CameraButton = function CameraButton(_ref) {\n  var onPhotoTaken = _ref.onPhotoTaken;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    hasPermission = _useState2[0],\n    setHasPermission = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isCameraOpen = _useState4[0],\n    setIsCameraOpen = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    capturedImage = _useState6[0],\n    setCapturedImage = _useState6[1];\n  var cameraRef = useRef(null);\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      var _yield$Camera$request = yield Camera.requestPermissionsAsync(),\n        status = _yield$Camera$request.status;\n      setHasPermission(status === 'granted');\n    })();\n  }, []);\n  var openCamera = function openCamera() {\n    setIsCameraOpen(true);\n  };\n  var closeCamera = function closeCamera() {\n    setIsCameraOpen(false);\n  };\n  var takePicture = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      if (cameraRef.current) {\n        var photo = yield cameraRef.current.takePictureAsync();\n        setCapturedImage(photo);\n      }\n    });\n    return function takePicture() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var retakePicture = function retakePicture() {\n    setCapturedImage(null);\n  };\n  var validatePicture = function validatePicture() {\n    setIsCameraOpen(false);\n    setCapturedImage(null);\n  };\n  return _jsxs(View, {\n    children: [_jsx(View, {\n      style: styles.button,\n      children: _jsx(Pressable, {\n        style: [styles.button, styles.buttonOpen],\n        onPress: openCamera,\n        children: _jsx(Text, {\n          style: styles.textStyle,\n          children: \"Ouvrir la cam\\xE9ra\"\n        })\n      })\n    }), hasPermission === null ? _jsx(Text, {\n      children: \"Requesting camera permission...\"\n    }) : hasPermission === false ? _jsx(Text, {\n      children: \"No access to camera\"\n    }) : null, capturedImage ? _jsxs(View, {\n      children: [_jsx(Image, {\n        source: {\n          uri: capturedImage.uri\n        },\n        style: styles.capturedImage\n      }), _jsxs(View, {\n        style: styles.capturedImageButtons,\n        children: [_jsx(Button, {\n          title: \"Valider\",\n          onPress: validatePicture\n        }), _jsx(Button, {\n          title: \"Reprendre\",\n          onPress: retakePicture\n        })]\n      })]\n    }) : null, _jsx(Modal, {\n      visible: isCameraOpen && !capturedImage,\n      animationType: \"slide\",\n      children: _jsxs(View, {\n        style: styles.cameraContainer,\n        children: [_jsx(Camera, {\n          ref: cameraRef,\n          style: styles.camera,\n          type: Camera.Constants.Type.back\n        }), _jsxs(View, {\n          style: styles.captureButtonContainer,\n          children: [_jsx(Button, {\n            title: \"Prendre une photo\",\n            onPress: takePicture\n          }), _jsx(Button, {\n            title: \"Annuler\",\n            onPress: closeCamera\n          })]\n        })]\n      })\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  cameraContainer: {\n    flex: 1\n  },\n  camera: {\n    flex: 1\n  },\n  captureButtonContainer: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    padding: 20\n  },\n  capturedImage: {\n    width: 200,\n    height: 200\n  },\n  capturedImageButtons: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    width: '60%',\n    marginTop: 20\n  },\n  button: {\n    borderRadius: 20,\n    padding: 5,\n    margin_top: 5,\n    backgroundColor: '#da70d6'\n  },\n  textStyle: {\n    color: 'white',\n    fontWeight: 'bold',\n    textAlign: 'center'\n  }\n});\nexport default CameraButton;","map":{"version":3,"names":["React","useState","useEffect","useRef","View","Text","Button","Modal","Image","StyleSheet","Pressable","Camera","jsx","_jsx","jsxs","_jsxs","CameraButton","_ref","onPhotoTaken","_useState","_useState2","_slicedToArray","hasPermission","setHasPermission","_useState3","_useState4","isCameraOpen","setIsCameraOpen","_useState5","_useState6","capturedImage","setCapturedImage","cameraRef","_asyncToGenerator","_yield$Camera$request","requestPermissionsAsync","status","openCamera","closeCamera","takePicture","_ref3","current","photo","takePictureAsync","apply","arguments","retakePicture","validatePicture","children","style","styles","button","buttonOpen","onPress","textStyle","source","uri","capturedImageButtons","title","visible","animationType","cameraContainer","ref","camera","type","Constants","Type","back","captureButtonContainer","create","flex","flexDirection","justifyContent","padding","width","height","marginTop","borderRadius","margin_top","backgroundColor","color","fontWeight","textAlign"],"sources":["C:/Users/jouai/Desktop/Telecom/S9/image/Projet vision/TRYON/components/CameraButton.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { View, Text, Button, Modal, Image, StyleSheet, Pressable } from 'react-native';\r\nimport { Camera } from 'expo-camera';\r\n\r\nconst CameraButton = ({ onPhotoTaken }) => {\r\n  const [hasPermission, setHasPermission] = useState(null);\r\n  const [isCameraOpen, setIsCameraOpen] = useState(false);\r\n  const [capturedImage, setCapturedImage] = useState(null);\r\n  const cameraRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const { status } = await Camera.requestPermissionsAsync();\r\n      setHasPermission(status === 'granted');\r\n    })();\r\n  }, []);\r\n\r\n  const openCamera = () => {\r\n    setIsCameraOpen(true);\r\n  };\r\n\r\n  const closeCamera = () => {\r\n    setIsCameraOpen(false);\r\n  };\r\n\r\n  const takePicture = async () => {\r\n    if (cameraRef.current) {\r\n      const photo = await cameraRef.current.takePictureAsync();\r\n      setCapturedImage(photo);\r\n    }\r\n  };\r\n\r\n  const retakePicture = () => {\r\n    setCapturedImage(null);\r\n  };\r\n  const validatePicture = () => {\r\n    setIsCameraOpen(false);\r\n    setCapturedImage(null);\r\n  };\r\n\r\n\r\n  return (\r\n    <View>\r\n      <View style={styles.button}>\r\n        <Pressable\r\n          style={[styles.button, styles.buttonOpen]}\r\n          onPress={openCamera}>\r\n          <Text style={styles.textStyle}>Ouvrir la cam√©ra</Text>\r\n        </Pressable>\r\n      </View>\r\n      {hasPermission === null ? (\r\n        <Text>Requesting camera permission...</Text>\r\n      ) : hasPermission === false ? (\r\n        <Text>No access to camera</Text>\r\n      ) : null}\r\n\r\n      {capturedImage ? (\r\n        <View>\r\n          <Image source={{ uri: capturedImage.uri }} style={styles.capturedImage} />\r\n          <View style={styles.capturedImageButtons}>\r\n            <Button title=\"Valider\" onPress={validatePicture} />\r\n            <Button title=\"Reprendre\" onPress={retakePicture} />\r\n          </View>\r\n        </View>\r\n      ) : null}\r\n\r\n      <Modal visible={isCameraOpen && !capturedImage} animationType=\"slide\">\r\n        <View style={styles.cameraContainer}>\r\n          <Camera\r\n            ref={cameraRef}\r\n            style={styles.camera}\r\n            type={Camera.Constants.Type.back}\r\n          />\r\n          <View style={styles.captureButtonContainer}>\r\n            <Button title=\"Prendre une photo\" onPress={takePicture} />\r\n            <Button title=\"Annuler\" onPress={closeCamera} />\r\n          </View>\r\n        </View>\r\n      </Modal>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  cameraContainer: {\r\n    flex: 1,\r\n  },\r\n  camera: {\r\n    flex: 1,\r\n  },\r\n  captureButtonContainer: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    padding: 20,\r\n  },\r\n  capturedImage: {\r\n    width: 200,\r\n    height: 200,\r\n  },\r\n  capturedImageButtons: {\r\n    flexDirection: 'row',\r\n    justifyContent: 'space-between',\r\n    width: '60%',\r\n    marginTop: 20,\r\n  },\r\n  button: {\r\n    borderRadius: 20,\r\n    padding: 5,\r\n    margin_top: 5,\r\n    backgroundColor: '#da70d6',\r\n  },\r\n  textStyle: {\r\n    color: 'white',\r\n    fontWeight: 'bold',\r\n    textAlign: 'center',\r\n  },\r\n});\r\n\r\nexport default CameraButton;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}