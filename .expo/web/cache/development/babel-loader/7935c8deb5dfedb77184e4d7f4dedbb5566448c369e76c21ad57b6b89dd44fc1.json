{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { Camera } from 'expo-camera';\nimport { Video } from 'expo-av';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar VideoButton = function VideoButton(_ref) {\n  var onVideoTaken = _ref.onVideoTaken;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    hasAudioPermission = _useState2[0],\n    setHasAudioPermission = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    hasCameraPermission = _useState4[0],\n    setHasCameraPermission = _useState4[1];\n  var _useState5 = useState(Camera.Constants.Type.back),\n    _useState6 = _slicedToArray(_useState5, 2),\n    selectedCamera = _useState6[0],\n    setSelectedCamera = _useState6[1];\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    record = _useState8[0],\n    setRecord = _useState8[1];\n  var _useState9 = useState(null),\n    _useState10 = _slicedToArray(_useState9, 2),\n    cameraRef = _useState10[0],\n    setCameraRef = _useState10[1];\n  var video = React.useRef(null);\n  var _React$useState = React.useState({}),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    status = _React$useState2[0],\n    setStatus = _React$useState2[1];\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      var cameraStatus = yield Camera.requestCameraPermissionsAsync();\n      setHasCameraPermission(cameraStatus.status === 'granted');\n      var audioStatus = yield Camera.requestMicrophonePermissionsAsync();\n      setHasAudioPermission(audioStatus.status === 'granted');\n    })();\n  }, []);\n  var takeVideo = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      if (cameraRef) {\n        var data = yield cameraRef.recordAsync({\n          maxDuration: 10,\n          mute: false\n        });\n        setRecord(data.uri);\n        console.log(data.uri);\n      }\n    });\n    return function takeVideo() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var stopVideo = function () {\n    var _ref4 = _asyncToGenerator(function* () {\n      if (cameraRef) {\n        cameraRef.stopRecording();\n      }\n    });\n    return function stopVideo() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var flipCamera = function flipCamera() {\n    setSelectedCamera(selectedCamera === Camera.Constants.Type.back ? Camera.Constants.Type.front : Camera.Constants.Type.back);\n  };\n  if (hasCameraPermission === null || hasAudioPermission === null) {\n    return _jsx(View, {});\n  }\n  if (hasCameraPermission === false || hasAudioPermission === false) {\n    return _jsx(Text, {\n      children: \"No access to camera\"\n    });\n  }\n  return _jsxs(View, {\n    style: styles.centeredView,\n    children: [selectedCamera === Camera.Constants.Type.back ? _jsx(Camera, {\n      ref: function ref(_ref5) {\n        return setCameraRef(_ref5);\n      },\n      style: styles.fixedRatio,\n      type: selectedCamera,\n      ratio: '4:3'\n    }) : _jsx(Camera, {\n      ref: function ref(_ref6) {\n        return setCameraRef(_ref6);\n      },\n      style: styles.fixedRatio,\n      type: selectedCamera,\n      ratio: '4:3',\n      frontMirror: true\n    }), _jsx(Button, {\n      title: \"Flip Video\",\n      onPress: flipCamera\n    }), _jsx(Button, {\n      title: \"Take video\",\n      onPress: takeVideo\n    }), _jsx(Button, {\n      title: \"Stop Video\",\n      onPress: stopVideo\n    }), record && _jsx(Video, {\n      ref: video,\n      style: styles.video,\n      source: {\n        uri: record\n      },\n      useNativeControls: true,\n      resizeMode: \"contain\",\n      isLooping: true,\n      onPlaybackStatusUpdate: function onPlaybackStatusUpdate(status) {\n        return setStatus(function () {\n          return status;\n        });\n      }\n    }), _jsx(View, {\n      style: styles.button,\n      children: _jsx(Button, {\n        title: status.isPlaying ? 'Pause' : 'Play',\n        onPress: function onPress() {\n          return status.isPlaying ? video.current.pauseAsync() : video.current.playAsync();\n        }\n      })\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  centeredView: {\n    flex: 1,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  fixedRatio: {\n    flex: 1,\n    aspectRatio: 4 / 3,\n    width: '100%'\n  },\n  video: {\n    width: '100%',\n    height: 300\n  },\n  button: {\n    marginTop: 20\n  }\n});\nexport default VideoButton;","map":{"version":3,"names":["React","useState","useEffect","StyleSheet","Text","View","Button","Camera","Video","jsx","_jsx","jsxs","_jsxs","VideoButton","_ref","onVideoTaken","_useState","_useState2","_slicedToArray","hasAudioPermission","setHasAudioPermission","_useState3","_useState4","hasCameraPermission","setHasCameraPermission","_useState5","Constants","Type","back","_useState6","selectedCamera","setSelectedCamera","_useState7","_useState8","record","setRecord","_useState9","_useState10","cameraRef","setCameraRef","video","useRef","_React$useState","_React$useState2","status","setStatus","_asyncToGenerator","cameraStatus","requestCameraPermissionsAsync","audioStatus","requestMicrophonePermissionsAsync","takeVideo","_ref3","data","recordAsync","maxDuration","mute","uri","console","log","apply","arguments","stopVideo","_ref4","stopRecording","flipCamera","front","children","style","styles","centeredView","ref","fixedRatio","type","ratio","frontMirror","title","onPress","source","useNativeControls","resizeMode","isLooping","onPlaybackStatusUpdate","button","isPlaying","current","pauseAsync","playAsync","create","flex","justifyContent","alignItems","aspectRatio","width","height","marginTop"],"sources":["C:/Users/jouai/Desktop/Telecom/S9/image/Projet vision/TRYON/components/VideoButton.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { StyleSheet, Text, View, Button } from 'react-native';\r\nimport { Camera } from 'expo-camera';\r\nimport { Video } from 'expo-av';\r\n\r\nconst VideoButton = ({ onVideoTaken }) => {\r\n  const [hasAudioPermission, setHasAudioPermission] = useState(null);\r\n  const [hasCameraPermission, setHasCameraPermission] = useState(null);\r\n  const [selectedCamera, setSelectedCamera] = useState(Camera.Constants.Type.back);\r\n  const [record, setRecord] = useState(null);\r\n  const [cameraRef, setCameraRef] = useState(null);\r\n  const video = React.useRef(null);\r\n  const [status, setStatus] = React.useState({});\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      const cameraStatus = await Camera.requestCameraPermissionsAsync();\r\n      setHasCameraPermission(cameraStatus.status === 'granted');\r\n      const audioStatus = await Camera.requestMicrophonePermissionsAsync();\r\n      setHasAudioPermission(audioStatus.status === 'granted');\r\n    })();\r\n  }, []);\r\n\r\n  const takeVideo = async () => {\r\n    if (cameraRef) {\r\n      const data = await cameraRef.recordAsync({\r\n        maxDuration: 10,\r\n        mute: false,\r\n      });\r\n      setRecord(data.uri);\r\n      console.log(data.uri);\r\n    }\r\n  };\r\n\r\n  const stopVideo = async () => {\r\n    if (cameraRef) {\r\n      cameraRef.stopRecording();\r\n    }\r\n  };\r\n\r\n  const flipCamera = () => {\r\n    setSelectedCamera(\r\n      selectedCamera === Camera.Constants.Type.back\r\n        ? Camera.Constants.Type.front\r\n        : Camera.Constants.Type.back\r\n    );\r\n  };\r\n\r\n  if (hasCameraPermission === null || hasAudioPermission === null) {\r\n    return <View />;\r\n  }\r\n\r\n  if (hasCameraPermission === false || hasAudioPermission === false) {\r\n    return <Text>No access to camera</Text>;\r\n  }\r\n\r\n  return (\r\n    <View style={styles.centeredView}>\r\n      {selectedCamera === Camera.Constants.Type.back ? (\r\n        <Camera\r\n          ref={(ref) => setCameraRef(ref)}\r\n          style={styles.fixedRatio}\r\n          type={selectedCamera}\r\n          ratio={'4:3'}\r\n        />\r\n      ) : (\r\n        <Camera\r\n          ref={(ref) => setCameraRef(ref)}\r\n          style={styles.fixedRatio}\r\n          type={selectedCamera}\r\n          ratio={'4:3'}\r\n          frontMirror={true} \r\n        />\r\n      )}\r\n      <Button title=\"Flip Video\" onPress={flipCamera} />\r\n      <Button title=\"Take video\" onPress={takeVideo} />\r\n      <Button title=\"Stop Video\" onPress={stopVideo} />\r\n      {record && (\r\n        <Video\r\n          ref={video}\r\n          style={styles.video}\r\n          source={{\r\n            uri: record,\r\n          }}\r\n          useNativeControls\r\n          resizeMode=\"contain\"\r\n          isLooping\r\n          onPlaybackStatusUpdate={(status) => setStatus(() => status)}\r\n        />\r\n      )}\r\n      <View style={styles.button}>\r\n        <Button\r\n          title={status.isPlaying ? 'Pause' : 'Play'}\r\n          onPress={() =>\r\n            status.isPlaying ? video.current.pauseAsync() : video.current.playAsync()\r\n          }\r\n        />\r\n      </View>\r\n    </View>\r\n  );\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  centeredView: {\r\n    flex: 1,\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n  },\r\n  fixedRatio: {\r\n    flex: 1,\r\n    aspectRatio: 4 / 3,\r\n    width: '100%',\r\n  },\r\n  video: {\r\n    width: '100%',\r\n    height: 300,\r\n  },\r\n  button: {\r\n    marginTop: 20,\r\n  },\r\n});\r\n\r\nexport default VideoButton;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}